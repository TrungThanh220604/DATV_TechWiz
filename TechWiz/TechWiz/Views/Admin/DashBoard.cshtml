
@{
	ViewData["Title"] = "DashBoard";
}
<link rel="stylesheet" href="~/css/AdminDashBoard.css">
<div class="head-title">
	<div class="left">
		<h1>Dashboard</h1>
		<ul class="breadcrumb">
			<li>
				<a href="#">Dashboard</a>
			</li>
			<li><i class='bx bx-chevron-right'></i></li>
			<li>
				<a class="active" href="#">Home</a>
			</li>
		</ul>
	</div>
</div>
<ul class="box-info">
	<li>
		<i class='bx bxs-group'></i>
		<span class="text">
			<h3>@Model.UsersCount</h3>
			<p>Users</p>
		</span>
	</li>
	<li>
		<i class='bx bxs-map'></i>
		<span class="text">
			<h3>@Model.DestinationsCount</h3>
			<p>Destinations</p>
		</span>
	</li>
	<li>
		<i class='bx bx-trip'></i>
		<span class="text">
			<h3>@Model.TripsCount</h3>
			<p>Trips</p>
		</span>
	</li>
	<li>
		<i class='bx bxs-dollar-circle'></i>
		<span class="text">
			<h3>@Model.CurrencyCount</h3>
			<p>Currency</p>
		</span>
	</li>
</ul>
<div class="table-data">
	<div class="order">
		<div class="head">
			<h3>Recently Created Account</h3>
		</div>
		<table>
			<thead>
				<tr>
					<th>User</th>
					<th>Email</th>
					<th>Role</th>
				</tr>
			</thead>
			<tbody>
				@for (int i = 0; i < Model.RecentUsers.Count; i++)
				{
					<tr>
						<td>
							<img src="~/imageAdmin/@Model.RecentUsers[i].link_avatar">
							<p>@Model.RecentUsers[i].UserName</p>
						</td>
						<td>@Model.RecentUsers[i].Email</td>
						<td>
							@{
								var roles = Model.RecentUserRoles[i]; 
							}
							@if (roles != null && roles.Count > 0) 
							{
								@string.Join(", ", roles)
							}
							else
							{
								<span>No Role</span>
							}
						</td>
					</tr>
				}
				
			</tbody>
		</table>
	</div>
</div>
<div class="table-data">
	<div class="order">
		<div class="head">
			<h3>Recently Created Trips</h3>
		</div>
		<table>
			<thead>
				<tr>
					<th>User</th>
					<th>Trip</th>
					<th>Destination</th>
					<th>Budget</th>
					<th>Start Date</th>
					<th>End Date</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var trip in Model.RecentTrips)
				{
					<tr>
						<td>
							<img src="~/imageAdmin/people.png">
							<p>@trip.user?.UserName</p> 
						</td>
						<td>@trip.TripName</td>
						<td>@trip.destination?.DesName</td>
						<td>@trip.Budget</td>
						<td>@trip.StartTime?.ToString("yyyy-MM-dd")</td>
						<td>@trip.EndTime?.ToString("yyyy-MM-dd")</td>
					</tr>
				}
				
			</tbody>
		</table>
	</div>
</div>